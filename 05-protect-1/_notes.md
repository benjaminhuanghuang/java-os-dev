# Hello OS
[java开发操作系统内核：由实模式进入保护模式之32位寻址](https://blog.csdn.net/tyler_download/article/details/52021120)

https://www.bilibili.com/video/BV1hJ411n7rs?p=5

https://github.com/wycl16514/OS-Kernel-from-real-to-protected-mode


C编译器通常只能生成32位模式的机器语言。如果一定要生成16位模式机器语言，虽然也不是做不到，但是很费事，还没什么好处。

CPU有16位和32位两种模式。如果以16位模式启动的话，用AX和CX等16位寄存器会非常方便，但反过来，像EAX和ECX等32位的寄存器，使用起来就很麻烦。另外，16位模式和32位模式中，机器语言的命令代码不一样。同样的机器语言，解释的方法也不一样，所以16位模式的机器语言在32位模式下不能运行，反之亦然。

32位模式下可以使用的内存容量远远大于1MB。另外，CPU的自我保护功能（识别出可疑的机器语言并进行屏蔽，以免破坏系统）在16位下不能用，但32位下能用

在实模式下，cpu只能处理最多16位的数据，地址总线有20位，使用16位寄存器，16位数据总线，20位的地址总线，寻址方式是由段和偏移两部分
```
  物理地址 = 段值 * 16 + 偏移
```
段值和偏移都只能用16位来表示，段值16位，16是等于2^4，所以段值*16也就相当于一个20位的数字，由此段值*16的数值不会超过1M,
而偏移16位，能表示的地址范围也就不超过4K,因此整个物理地址能抵达的范围也就是1M + 4k.

在保护模式下，cpu可以处理32位的数据，同时地址总线也扩张到32位，这样，cpu能访问的内存有4G.


