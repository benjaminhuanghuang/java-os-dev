


## C cal ASM function

根据C语言的调用规定，如果函数有返回值，那么返回值必须存储在寄存器al,ah, 或ax, eax中，所以大家可以发现，io_in8 或相关的调用，从端口读出的数据都会被存储到寄存器al, 或ax中。



## ASM call C function


## 

LABEL_DESC_STACK 这个描述符用来设置一段可读可写的内存，它的起始地址是LABEL_STACK， 可以看到，程序通过语句：times 512 db 0
初始化了512字节的内存。C语言的运行，特别是函数调用时，是需要一个堆栈来传递参数的，所以，要运行C语言，我们首先需要为其配置一个堆栈，该描述符所对应的这512自己内存就是给C语言使用的，由于堆栈只有512字节，在后面我们使用C语言写的代码中，函数的局部变量大小不能超过512字节，例如下面的代码可能就要出错了：

void fun() {
  char buf[513];
}